; =============================================================================
;	ROM_sample002.ASM
; -----------------------------------------------------------------------------
;	Feb./1/2020 HRA!
; =============================================================================

chput		= 0x00A2
himem		= 0xfc4a

bank0_sel	= 0x6000
bank1_sel	= 0x6800
bank2_sel	= 0x7000
bank3_sel	= 0x7800

; ==============================================================================
; ==============================================================================
;	ROM Bank#0
; ==============================================================================
; ==============================================================================

		org			0x4000
; ==============================================================================
;	ROM Header
; ==============================================================================
rom_header_id:
		ds			"AB"
rom_header_init:
		dw			entry_point
rom_header_statement:
		dw			0
rom_header_device:
		dw			0
rom_header_text:
		dw			0
rom_header_reserved:
		space		0x0010 - 0x000A, 0

; ==============================================================================
;	Program entry point
; ==============================================================================
entry_point:
		; Initialize Stack Pointer
		ld			sp, [himem]

main_loop:
		; Put message (Bank#0 on Bank0)
		ld			hl, display_message1
		call		puts
		; Put message (Bank#1 on Bank1)
		ld			a, 1					; Bank#1
		ld			[bank1_sel], a			; Bank1 changes to Bank#1
		ld			hl, display_message2
		call		puts
		; Put message (Bank#2 on Bank1)
		ld			a, 2					; Bank#2
		ld			[bank1_sel], a			; Bank1 changes to Bank#2
		ld			hl, display_message3
		call		puts
		; Put message (Bank#3 on Bank1)
		ld			a, 3					; Bank#3
		ld			[bank1_sel], a			; Bank1 changes to Bank#3
		ld			hl, display_message4
		call		puts
		jp			main_loop

; ==============================================================================
;	puts
;	input)
;		HL .... address of target string (ASCII-Z)
; ==============================================================================
puts:
		ld			a, [hl]
		inc			hl
		or			a, a
		ret			z
		call		chput
		jp			puts

display_message1:
		ds			"Bank#0 on Bank0"
		db			0x0D, 0x0A, 0

		align		8192

; ==============================================================================
; ==============================================================================
;	ROM Bank#1
; ==============================================================================
; ==============================================================================

		org			0x6000
display_message2:
		ds			"Bank#1 on Bank1"
		db			0x0D, 0x0A, 0

		align		8192

; ==============================================================================
; ==============================================================================
;	ROM Bank#2
; ==============================================================================
; ==============================================================================

		org			0x6000
display_message3:
		ds			"Bank#2 on Bank1"
		db			0x0D, 0x0A, 0

		align		8192

; ==============================================================================
; ==============================================================================
;	ROM Bank#3
; ==============================================================================
; ==============================================================================

		org			0x6000
display_message4:
		ds			"Bank#3 on Bank1"
		db			0x0D, 0x0A, 0

		align		8192

; ==============================================================================
; ==============================================================================
;	Padding
; ==============================================================================
; ==============================================================================
		ds			"Padding"

		align		131072
